(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const B=20,H="https://cataas.com/cat";let l=0,c=[],S=[],Y=[],C,L,d,E,u=!1,n=null;const I=document.getElementById("loading"),a=document.getElementById("deck"),T=document.getElementById("counter"),$=document.getElementById("total"),M=document.getElementById("likeBtn"),O=document.getElementById("nopeBtn");async function _(){try{A(!0);const e=Date.now();c=Array.from({length:B},(t,s)=>({id:`cat-${e}-${s}`,url:`${H}?t=${e}${s}`})),$&&($.textContent=B),await P(),K()}catch(e){console.error("Error initializing app:",e),Q()}finally{A(!1)}}async function P(){if(l>=c.length){X();return}const e=c[l];if(n=z(e),a&&(a.innerHTML="",a.appendChild(n)),T&&(T.textContent=l+1),l<c.length-1){const t=c[l+1],s=new Image;s.src=t.url}}function z(e){const t=document.createElement("div");return t.className="card",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.transition="transform 0.3s ease",t.innerHTML=`
        <div class="topbar"></div>
        <img src="${e.url}" alt="A cute cat" style="width: 100%; height: 100%; object-fit: cover;">
        <div class="footfade"></div>
        <div class="label like" style="opacity: 0; transform: rotate(-8deg);">LIKE</div>
        <div class="label nope" style="opacity: 0; transform: rotate(8deg);">NOPE</div>
      `,t}function K(){a&&(a.addEventListener("touchstart",U,{passive:!1}),a.addEventListener("touchmove",W,{passive:!1}),a.addEventListener("touchend",F)),document.addEventListener("mousedown",R),document.addEventListener("mousemove",G),document.addEventListener("mouseup",J),M&&M.addEventListener("click",()=>p("right")),O&&O.addEventListener("click",()=>p("left")),document.addEventListener("keydown",e=>{e.key==="ArrowRight"&&p("right"),e.key==="ArrowLeft"&&p("left")})}function U(e){if(!n)return;e.preventDefault();const t=e.touches[0];C=t.clientX,L=t.clientY,u=!0,n.style.transition="none"}function W(e){if(!u||!n)return;e.preventDefault();const t=e.touches[0];d=t.clientX-C,E=t.clientY-L,D(d,E)}function F(){if(!(!u||!n))if(u=!1,Math.abs(d)>100){const e=d>0?"right":"left";p(e)}else n.style.transition="transform 0.3s ease",n.style.transform="translate(0, 0) rotate(0deg)",v(0,0)}function R(e){!n||e.button!==0||(C=e.clientX,L=e.clientY,u=!0,n&&(n.style.transition="none"))}function G(e){!u||!n||(d=e.clientX-C,E=e.clientY-L,D(d,E))}function J(){if(!(!u||!n))if(u=!1,Math.abs(d)>100){const e=d>0?"right":"left";p(e)}else n.style.transition="transform 0.3s ease",n.style.transform="translate(0, 0) rotate(0deg)",v(0,0)}function D(e,t){if(!n)return;const s=e*.1;n.style.transform=`translate(${e}px, ${t}px) rotate(${s}deg)`,e>0?v(Math.min(e/100,1),0):v(0,Math.min(Math.abs(e)/100,1))}function v(e,t){if(!n)return;const s=n.querySelector(".like"),r=n.querySelector(".nope");s&&(s.style.opacity=e),r&&(r.style.opacity=t)}async function p(e){if(!n)return;const t=c[l];e==="right"?S.push(t):Y.push(t);const s=e==="right"?window.innerWidth:-window.innerWidth;n.style.transition="transform 0.5s ease",n.style.transform=`translate(${s}px, 0) rotate(${e==="right"?30:-30}deg)`,l++,l>=c.length?setTimeout(()=>{X()},500):setTimeout(()=>{P()},300)}function A(e){I&&(I.style.display=e?"flex":"none"),a&&(a.style.display=e?"none":"block")}function Q(){const e=document.getElementById("error");e&&(e.style.display="flex")}function X(){const e=[...S],t=document.createElement("div");t.className="summary-container";const s=document.createElement("div");s.className="summary-content";const r=document.createElement("div");r.className="summary-header";const o=document.createElement("h1");o.className="summary-title";const i=document.createElement("span");i.className="title-text",i.textContent="All done!";const m=document.createElement("span");m.className="title-emoji",m.textContent="🐾",o.appendChild(i),o.appendChild(document.createTextNode(" ")),o.appendChild(m);const w=document.createElement("p");if(w.className="summary-text",w.textContent=`You liked ${e.length} and passed on ${Y.length} out of ${c.length} cats!`,r.appendChild(o),r.appendChild(w),e.length>0){const f=document.createElement("h2");f.className="liked-title",f.textContent="Your Liked Cats";const N=document.createElement("div");N.className="cat-grid",e.forEach((q,j)=>{const h=document.createElement("div");h.className="cat-grid-item",h.style.animationDelay=`${.5+j*.05}s`;const g=document.createElement("img");g.src=q.url,g.alt="Liked cat",g.loading="lazy",h.appendChild(g),N.appendChild(h)}),s.appendChild(f),s.appendChild(N)}else{const f=document.createElement("p");f.className="no-likes",f.textContent="You didn't like any cats this time. Try again!",s.appendChild(f)}const k=document.createElement("div");k.className="summary-footer";const y=document.createElement("button");y.className="btn start-over-btn",y.textContent="Start Over",y.onclick=()=>window.location.reload(),k.appendChild(y),t.appendChild(r),t.appendChild(s),t.appendChild(k);const b=document.querySelector(".controls");b&&(b.style.display="none");const x=document.getElementById("hint");x&&(x.style.display="none"),document.getElementById("deck").style.display="none",document.getElementById("done").style.display="flex",document.getElementById("done").innerHTML="",document.getElementById("done").appendChild(t),window.scrollTo(0,0)}_();
